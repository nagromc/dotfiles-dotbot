- defaults:
    link:
        create: true
        relink: true

- clean:
    - '~'
    - '~/.atom'
    - '~/.config'
    - '~/.config/fish'
    - '~/.config/fish/functions'
    - '~/.ssh'
    - '~/.vim'
    - '~/.Xresources.d'

- shell:
    - git submodule update --init --recursive

# allows to create ~/.config/fish/completions/ before linking files
- link:
    ~/.config/fish/completions: fish/completions/

- link:
    ~/.atom/.apmrc: atom/apmrc
    ~/.atom/config.cson: atom/config.cson
    ~/.atom/init.coffee: atom/init.coffee
    ~/.atom/keymap.cson: atom/keymap.cson
    ~/.atom/snippets.cson: atom/snippets.cson
    ~/.atom/styles.less: atom/styles.less
    ~/.bash_aliases: bash/bash_aliases
    ~/.bowerrc: bower/bowerrc
    ~/.bundle/config: bundler/config
    ~/.config/Brackets/brackets.json: brackets/brackets.json
    ~/.config/Code/User/settings.json: code/settings.json
    ~/.config/fish/abbrs.fish: fish/abbrs.fish
    ~/.config/fish/aliases.fish: fish/aliases.fish
    ~/.config/fish/completions/git.fish: git/git-flow-completion/git.fish
    ~/.config/fish/config.fish: fish/config.fish
    ~/.config/fish/fisherman/fishfile: fish/fisherman/fishfile
    ~/.config/fish/functions: fish/functions/
    ~/.config/fish/exports.fish: fish/exports.fish
    ~/.config/fish/path.fish: fish/path.fish
    ~/.config/fish/shell_prompt.sh: fish/shell_prompt.sh
    ~/.config/keepassxc/keepassxc.ini: keepassxc/keepassxc.ini
    ~/.config/mc/ini: mc/ini
    ~/.config/pip/pip.conf: pip/pip.conf
    ~/.curlrc: curl/curlrc
    ~/.dotfiles: ''
    ~/.editorconfig: editorconfig/editorconfig
    ~/.eslintrc.yaml: eslint/eslintrc.yaml
    ~/.fonts: bin/fonts
    ~/.gemrc: gem/gemrc
    ~/.git_template: git/template/
    ~/.gitattributes_global: git/gitattributes_global
    ~/.gitconfig: git/gitconfig
    ~/.gitignore_global: git/gitignore_global
    ~/.gnupg/gpg-agent.conf: gnupg/gpg-agent.conf
    ~/.gnupg/gpg.conf: gnupg/gpg.conf
    ~/.gnupg/dirmngr.conf: gnupg/dirmngr.conf
    ~/.highlight/langDefs: bin/syntaxhighlight/langDefs/
    ~/.local/bin/diff-so-fancy: bin/diff-so-fancy/third_party/build_fatpack/diff-so-fancy
    ~/.local/bin/lessvim: /usr/share/vim/vim80/macros/less.sh
    ~/.mozilla/firefox/profiles.ini: firefox/profiles.ini
    ~/.mozilla/firefox/default/user.js: firefox/user.js
    ~/.npmrc: npm/npmrc
    ~/.pdbrc: pdb/pdbrc
    ~/.ssh/authorized_keys: ssh/authorized_keys
    ~/.ssh/config.hostnames: ssh/config.hostnames
    ~/.texmf: texmf/
    ~/.tigrc: tig/tigrc
    ~/.tldrrc: tldr/tldrrc
    ~/.tmux: tmux/
    ~/.tmux.conf: tmux/tmux.conf
    ~/.tmuxline.vim.conf: tmux/tmuxline.vim.conf
    ~/.vim/bundle: vim/bundle
    ~/.vim/ftdetect: vim/ftdetect
    ~/.vim/ftplugin: vim/ftplugin
    ~/.vimrc: vim/vimrc
    ~/.Xmodmap: X11/Xmodmap
    ~/.Xresources: X11/Xresources
    ~/.Xresources.d: X11/Xresources.d/

- shell:
    - ["mkdir -p ~/.local/ ~/.local/bin/ ~/.local/etc/ ~/.local/include/ ~/.local/lib/ ~/.local/sbin/ ~/.local/share/", Creating ~/.local folder where you can install extra packages]
    - ["sh -c 'mkdir -p ~/passwords/ && ln -s -f ~/CloudStation/KeePass/morgan.kdbx ~/passwords/morgan.kdbx && chmod -R go-rwx ~/passwords'", Creating ~/passwords directory]
    - ["sh -c '(echo \"# Do not edit this file. Please edit ~/.config/dotfiles/mintty/minttyrc instead.\" ; cat mintty/minttyrc mintty/minttyrc.d/solarized/.minttyrc.dark) > ~/.minttyrc'", Configuring mintty]
    - ["sh -c 'touch ~/.ssh/config_local && (echo \"# Do not edit this file. Please edit ~/.config/dotfiles/ssh/config instead.\n# OpenSSH 7.3 will allow the use of the Include directive.\" ; cat ~/.ssh/config_local ssh/config) > ~/.ssh/config'", Concatenating ~/.ssh/config files]
    - [mkdir -p ~/.texmf/tex/latex, Creating local LaTeX packages]
    - [pre-commit install, Installing pre-commit hooks]
    - ["sh gnupg/fix-socket-gpg-location.sh"]
    - ["sh -c 'curl --output - https://keybase.io/mgn/pgp_keys.asc | gpg --import'", Importing my own public key]
    - ["chmod go-rwx ~/.gnupg/", Fix ~/.gnupg permissions]
